# 更新日誌 (CHANGELOG)

本檔案記錄專案的所有重要變更，方便追蹤與還原。

## 版本格式說明
- **[新增]** - 新功能
- **[修正]** - Bug 修復
- **[變更]** - 既有功能的變更
- **[移除]** - 移除的功能
- **[安全]** - 安全性相關修正

---

---

## [v1.6] - 2026-01-31

### [新增]
- **文字顏色標記功能**
  - 支援在所有純文字欄位使用顏色標記語法
  - 標記格式：`[顏色名稱]文字[/顏色名稱]`（例如：`[red]紅色文字[/red]`）
  - 支援 14 種顏色：red, green, blue, yellow, orange, purple, pink, cyan, gray, black, white, gold, silver, brown
  - 套用欄位：首頁訊息、名稱（日/中/英）、階段、屬性、完美訓練、必殺技、進化條件、描述
  - 新增完整的測試指南文件

### [變更]
- 新增 `parseColorTags()` 函式解析顏色標記
- 所有純文字欄位顯示時自動轉換顏色標記為 HTML

### [技術]
- 使用正則表達式解析標記語法
- 轉換為 `<span style="color: #hex;">` HTML 標籤
- 大小寫不敏感，支援 `[RED]`、`[Red]`、`[red]`

---

## [v1.5] - 2026-01-30

### [新增]
- **首頁卡片布局優化**
  - 首頁卡片改為兩欄置中布局
  - 一排固定顯示 2 個卡片，第三個自動換行
  - 整體容器置中對齊，最大寬度 1000px
  
- **首頁卡片圖檔顯示功能**
  - 支援首頁分頁欄位 4 的圖檔顯示
  - 圖檔放置在卡片文字左側
  - 使用與超超代相同的圖片索引規則
  - 自動偵測圖片格式（jpg, png, gif 等）
  - 圖片尺寸 80x80px，圓角設計

### [變更]
- 調整首頁容器使用 CSS Grid 布局
- 新增 `.home-container` 與 `.index-card-image` 樣式

---

## [v1.4] - 2026-01-30

### [新增]
- **超超代分頁版本篩選功能**
  - 在超超代分頁頂部新增版本篩選下拉選單
  - 篩選選項自動從「訊息」分頁編號 2~4 讀取
  - 依選擇的版本即時顯示/隱藏卡片
  - 支援「全部版本」選項顯示所有卡片
  - 篩選器採用漂亮的漸層紫色設計，與整體風格一致

### [變更]
- 卡片元素新增 `data-version` 屬性以支援篩選功能
- 卡片 class 新增 `detail-card` 以便篩選器識別

---

## [v1.3] - 2026-01-30

### [新增]
- **瀏覽器歷史記錄導航功能**
  - 支援使用瀏覽器的「上一頁」和「下一頁」按鈕在不同視圖間導航
  - 使用 History API (`pushState` 和 `popstate` 事件) 實作
  - 保留原有的「返回首頁」按鈕，現在使用 `history.back()` 觸發
  - 自動保存視圖狀態（首頁、詳細頁、介紹頁）
  - 瀏覽器前進/後退功能完整支援

### [變更]
- 修改返回按鈕行為，從直接呼叫 `showHomeView()` 改為使用 `history.back()`
- 在每次視圖切換時自動推送歷史記錄狀態

---

## [v1.2] - 2026-01-30

### [修正]
- 修復從備份還原後系統恢復正常運作
- 移除所有自動載入與 IndexedDB 快取功能
- 清除重複的事件監聽器，確保按鈕只觸發一次

### [變更]
- 改為完全手動載入模式，每次需重新選擇 Excel 檔案
- 簡化程式碼結構，移除複雜的檔案同步機制

---

## [v1.1] - 2026-01-30

### [新增]
- 圖片格式自動偵測功能，支援 JPG, PNG, GIF, WEBP, BMP
- 智慧分頁名稱搜尋，自動對應相似名稱（如「超超代」對應「超超代數碼寶貝」）
- 圖片載入失敗時顯示紅色除錯訊息，標示遺失的檔名

### [修正]
- 修正圖片路徑問題，支援本地測試路徑 `../Digimonwiki/images/`
- 修正 Excel 檔名包含副檔名時的圖片載入邏輯
- 優化圖片格式嘗試順序，提高載入成功率

---

## [v1.0] - 2026-01-30 (初始穩定版)

### [新增]
- Excel 檔案讀取與解析功能
- 首頁卡片式資料展示
- 詳細資料頁面顯示
- 介紹頁面支援文字與圖片混合顯示
- 圖片自動載入與錯誤處理
- 響應式設計，支援各種螢幕尺寸

### [功能]
- 支援多分頁 Excel 檔案
- 自動讀取「訊息」分頁更新網頁標題
- 圖片路徑自動處理
- 返回首頁功能

---

## 備份說明

**當前穩定版本**: v1.6  
**備份位置**: `../game-database_backup_v1/`  
**備份檔案**: 
- index.html
- script.js
- style.css
- field-viewer.html
- README.md
- CHANGELOG.md

**還原方式**:
```powershell
# 從備份還原所有檔案
$backupPath = "..\game-database_backup_v1"
Copy-Item -Path "$backupPath\*" -Destination "." -Force
```

**建立新備份**:
```powershell
# 更新備份資料夾
$backupPath = "..\game-database_backup_v1"
Copy-Item -Path "index.html", "script.js", "style.css", "field-viewer.html", "README.md", "CHANGELOG.md" -Destination $backupPath -Force
```
